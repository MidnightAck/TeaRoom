# 关于 Optional
#技术/ios/swift

## 是什么
可选值本质上是枚举。
![](%E5%85%B3%E4%BA%8E%20Optional/%E6%88%AA%E5%B1%8F2020-07-09%20%E4%B8%8A%E5%8D%8811.44.18.png)

当值为nil的时候，实际上对应的就是`.none`。而其他场景下对应的是`.some`。使用`?``!`的方式可以当作语法糖的部分。

对于一个`optional`类型，不要把它理解成对应的数据类型，而是要理解为可能包含某个类型的`optional`类型。解包或者通过强制解包，或者通过`if let``guard let`来先做一次处理。swift安全性很强，使用的时候要考虑清楚，如果这个数据有可能是nil类型，那么使用可选值是最好的。

## 可选值绑定
if let 和 guard let可以有效的帮我们避免强制解包，这两者有些许的不同。

if let获得的数据作用域仅仅在if语句内部，但有时我们需要进行一次解包，在之后的模块中使用，在这种情况下使用guard let就可以更好的表现。
```swift
guard let firstElement = a.first else {
	return
}
//firstElement已经被解包
```

## 强制解包的时机
尽量不要强制解包，除非
- 明确的知道该值不会为nil
- 当解包为nil的时候，程序就应该crash
后者非常的激进，在上线的程序中不应该有这样的情况。建议如果强制解包还是加上注释